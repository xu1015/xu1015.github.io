{"version":3,"sources":["webpack:///src/view/home.vue","webpack:///./src/view/home.vue?227c","webpack:///./src/view/home.vue"],"names":["home","name","data","imgNum","filesLength","imgLength","beginIndex","isControl","watch","n","o","isBianli","this","console","log","getFileData","methods","$refs","file","files","length","imgLengthLin","type","split","reader","FileReader","readAsDataURL","that","onloadend","dataURL","result","downloadImg","convertBase64UrlToBlob","base64","parts","contentType","raw","window","atob","rawLength","uInt8Array","Uint8Array","i","charCodeAt","Blob","myBrowser","userAgent","navigator","indexOf","imageName","imagelength","blob","msSaveBlob","location","href","a","document","createElement","download","URL","createObjectURL","click","view_home","render","_vm","_h","$createElement","_c","_self","staticClass","_v","directives","rawName","value","expression","modifiers","number","attrs","disabled","oninput","placeholder","domProps","on","input","$event","target","composing","_n","blur","$forceUpdate","ref","multiple","change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/0.4eea8be818317f712604.js","sourcesContent":["<template>\r\n  <div class=\"homeDiv\">\r\n    <div class=\"uploadDiv\">\r\n      <div class=\"topInput\">初始下标: <input type=\"text\" v-model.number=\"beginIndex\" :disabled=\"isControl\" oninput=\"value=value.replace(/[^\\d]/g,'')\" placeholder=\"需要小一位\"></div>\r\n      <div class=\"upload\">\r\n        <p>点击选择需要上传的文件</p>\r\n        <input class=\"file\" type=\"file\" ref=\"file\" @change=\"getFileData\" multiple=\"multiple\">\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: \"home\",\r\n  data() {\r\n    return {\r\n      // 遍历的下标\r\n      imgNum:0,\r\n      // 选中的文件个数\r\n      filesLength:0,\r\n      // 选中文件个数是几位数\r\n      imgLength:0,\r\n      // 文件开始下标\r\n      beginIndex:0,\r\n      // 控制是否可输入\r\n      isControl:false,\r\n    }\r\n  },\r\n  watch:{\r\n    imgNum(n,o){\r\n      let isBianli = n==0&&o==this.filesLength;\r\n      console.log(\"查看是否符合条件\",isBianli)\r\n      if (this.filesLength>n&&!isBianli) {\r\n        this.getFileData()\r\n      }else{\r\n        debugger;\r\n        this.imgNum=0;\r\n        this.isControl=false;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    getFileData() {\r\n      this.isControl=true;\r\n      console.log(\"查看信息\", this.$refs.file.files)\r\n      // 获取文件列表\r\n      let files = this.$refs.file.files;\r\n      // 获取文件列表长度\r\n      this.filesLength = files.length;\r\n      \r\n      // 获取文件列表长度是几位数\r\n      var imgLengthLin = this.filesLength+this.beginIndex;\r\n      imgLengthLin = imgLengthLin+''\r\n      this.imgLength = imgLengthLin.length;\r\n      console.log(\"查看选择图片的长度\",this.imgLength)\r\n      if (this.filesLength+this.beginIndex>this.imgNum+this.beginIndex) {\r\n        var type = files[this.imgNum].type.split('/')[0]\r\n        if (type === 'image') {\r\n          var reader = new FileReader();\r\n          reader.readAsDataURL(files[this.imgNum])\r\n          console.log(\"第\"+this.imgNum+\"次\",reader)\r\n          var that = this;\r\n          reader.onloadend = function () {\r\n            var dataURL = reader.result;\r\n\r\n            that.downloadImg(dataURL,that.imgNum+that.beginIndex + 1, that.imgLength)\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // base64转blob格式\r\n    convertBase64UrlToBlob(base64) {\r\n      var parts = base64.split(\";base64,\");\r\n      var contentType = parts[0].split(\":\")[1];\r\n      var raw = window.atob(parts[1]);\r\n      var rawLength = raw.length;\r\n      var uInt8Array = new Uint8Array(rawLength);\r\n      for (var i = 0; i < rawLength; i++) {\r\n        uInt8Array[i] = raw.charCodeAt(i);\r\n      }\r\n      return new Blob([uInt8Array], { type: contentType });\r\n    },\r\n    // 判断浏览器类型\r\n\r\n    myBrowser() {\r\n      var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串\r\n      if (userAgent.indexOf(\"OPR\") > -1) {\r\n        return \"Opera\";\r\n      } //判断是否Opera浏览器 OPR/43.0.2442.991\r\n      if (userAgent.indexOf(\"Firefox\") > -1) {\r\n        return \"FF\";\r\n      } //判断是否Firefox浏览器  Firefox/51.0\r\n      if (userAgent.indexOf(\"Trident\") > -1) {\r\n        return \"IE\";\r\n      } //判断是否IE浏览器  Trident/7.0; rv:11.0\r\n      if (userAgent.indexOf(\"Edge\") > -1) {\r\n        return \"Edge\";\r\n      } //判断是否Edge浏览器  Edge/14.14393\r\n      if (userAgent.indexOf(\"Chrome\") > -1) {\r\n        return \"Chrome\";\r\n      } // Chrome/56.0.2924.87\r\n      if (userAgent.indexOf(\"Safari\") > -1) {\r\n        return \"Safari\";\r\n      } //判断是否Safari浏览器 AppleWebKit/534.57.2 Version/5.1.7 Safari/534.57.2\r\n    },\r\n    //图片格式和PDF\r\n    downloadImg(base64,name,length) {\r\n      console.log('查看下载地址', base64)\r\n      console.log('查看传递名称', name)\r\n      console.log('查看传递长度', length)\r\n      let imageName = name;\r\n      name = name + '';\r\n      let imagelength = length - name.length;\r\n      if (imagelength > 0) {\r\n        for (let o = 0; o < imagelength; o++) {\r\n          imageName = '0' + imageName;\r\n        }\r\n      }\r\n      console.log(\"查看处理后的名称\",imageName)\r\n      // 图片转为base64\r\n      var blob = this.convertBase64UrlToBlob(base64); // 转为blob对象\r\n      // 下载\r\n      if (this.myBrowser() == \"IE\") {\r\n        console.log(\"IE\")\r\n        window.navigator.msSaveBlob(blob, imageName + \".jpg\");\r\n      } else if (this.myBrowser() == \"FF\") {\r\n        console.log(\"FF\")\r\n        window.location.href = base64;\r\n      } else {\r\n        console.log(\"a标签\")\r\n        var a = document.createElement(\"a\");\r\n        a.download = imageName+'.jpg';\r\n        a.href = URL.createObjectURL(blob);\r\n        a.click();\r\n      }\r\n      this.imgNum+=1;\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.homeDiv {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  .uploadDiv {\r\n    \r\n    border-radius: 0.5rem;\r\n    box-shadow: 0 0 10px -5px rgb(10, 22, 185);\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    position: absolute;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n    box-sizing: border-box;\r\n    padding: 0.5rem;\r\n    .topInput{\r\n      padding-bottom: 1rem;\r\n      input{\r\n        width: 9rem;\r\n        height: 2rem;\r\n        border-radius: 0.5rem;\r\n        border: 1px solid red;\r\n        box-sizing: border-box;\r\n        padding-left: 0.3rem;\r\n        outline: none;\r\n      }\r\n    }\r\n    .upload{\r\n      width: 10rem;\r\n      height: 4rem;\r\n      border: 1px solid red;\r\n      position: relative;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n    }\r\n    p {\r\n      font-size: 0.6rem;\r\n    }\r\n    .file {\r\n      opacity: 0;\r\n      position: absolute;\r\n      inset: 0;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/view/home.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"homeDiv\"},[_c('div',{staticClass:\"uploadDiv\"},[_c('div',{staticClass:\"topInput\"},[_vm._v(\"初始下标: \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.beginIndex),expression:\"beginIndex\",modifiers:{\"number\":true}}],attrs:{\"type\":\"text\",\"disabled\":_vm.isControl,\"oninput\":\"value=value.replace(/[^\\\\d]/g,'')\",\"placeholder\":\"需要小一位\"},domProps:{\"value\":(_vm.beginIndex)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.beginIndex=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_vm._v(\" \"),_c('div',{staticClass:\"upload\"},[_c('p',[_vm._v(\"点击选择需要上传的文件\")]),_vm._v(\" \"),_c('input',{ref:\"file\",staticClass:\"file\",attrs:{\"type\":\"file\",\"multiple\":\"multiple\"},on:{\"change\":_vm.getFileData}})])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-cc621c24\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/home.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-cc621c24\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./home.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./home.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./home.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cc621c24\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-cc621c24\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/home.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}