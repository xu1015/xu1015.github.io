{"version":3,"sources":["webpack:///src/view/rotate.vue","webpack:///./src/view/rotate.vue?7bbf","webpack:///./src/view/rotate.vue"],"names":["rotate","name","data","imgNum","filesLength","imgLength","beginIndex","isControl","watch","n","o","isBianli","this","console","log","getFileData","methods","$refs","file","files","length","imgLengthLin","type","split","reader","FileReader","readAsDataURL","that","onloadend","dataURL","result","img","Image","src","onload","imgW","width","imgH","height","canvas","document","createElement","ctx","getContext","Math","PI","translate","drawImage","dataURL1","toDataURL","downloadImg","convertBase64UrlToBlob","base64","parts","contentType","raw","window","atob","rawLength","uInt8Array","Uint8Array","i","charCodeAt","Blob","myBrowser","userAgent","navigator","indexOf","imageName","imagelength","blob","msSaveBlob","location","href","a","download","URL","createObjectURL","click","view_rotate","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","id","_v","directives","rawName","value","expression","modifiers","number","disabled","oninput","placeholder","domProps","on","input","$event","target","composing","_n","blur","$forceUpdate","ref","multiple","change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/1.e6ded600c0a3c83ac2c9.js","sourcesContent":["<template>\n  <div class=\"homeDiv\" id=\"homeDiv\">\n    <div class=\"uploadDiv\">\n      <div class=\"topInput\">初始下标: <input type=\"text\" v-model.number=\"beginIndex\" :disabled=\"isControl\" oninput=\"value=value.replace(/[^\\d]/g,'')\" placeholder=\"需要小一位\"></div>\n      <div class=\"upload\">\n        <p>修改的文件</p>\n        <input class=\"file\" type=\"file\" ref=\"file\" @change=\"getFileData\" multiple=\"multiple\">\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: \"home\",\n  data() {\n    return {\n      // 遍历的下标\n      imgNum:0,\n      // 选中的文件个数\n      filesLength:0,\n      // 选中文件个数是几位数\n      imgLength:0,\n      // 文件开始下标\n      beginIndex:0,\n      // 控制是否可输入\n      isControl:false,\n    }\n  },\n  watch:{\n    imgNum(n,o){\n      let isBianli = n==0&&o==this.filesLength;\n      console.log(\"查看是否符合条件\",isBianli)\n      if (this.filesLength>n&&!isBianli) {\n        this.getFileData()\n      }else{\n        // debugger;\n        this.imgNum=0;\n        this.isControl=false;\n      }\n    },\n  },\n  methods: {\n    getFileData() {\n      this.isControl=true;\n      console.log(\"查看信息\", this.$refs.file.files)\n      // 获取文件列表\n      let files = this.$refs.file.files;\n      // 获取文件列表长度\n      this.filesLength = files.length;\n\n      // 获取文件列表长度是几位数\n      var imgLengthLin = this.filesLength+this.beginIndex;\n      imgLengthLin = imgLengthLin+''\n      this.imgLength = imgLengthLin.length;\n      console.log(\"查看选择图片的长度\",this.imgLength)\n      if (this.filesLength+this.beginIndex>this.imgNum+this.beginIndex) {\n        var type = files[this.imgNum].type.split('/')[0]\n        if (type === 'image') {\n          var reader = new FileReader();\n          reader.readAsDataURL(files[this.imgNum])\n          console.log(\"第\"+this.imgNum+\"次\",reader)\n          var that = this;\n          reader.onloadend = function () {\n            var dataURL = reader.result;\n            const img = new Image()\n            img.src = dataURL;\n            img.onload=function() {\n              const imgW = img.width ;\n              const imgH = img.height;\n              var canvas = document.createElement(\"canvas\");\n              canvas.width = imgH ;\n              canvas.height = imgW;\n              var ctx = canvas.getContext('2d');\n              ctx.rotate(-90*Math.PI/180);\n              ctx.translate(-imgW,0);\n              ctx.drawImage(img,0,0)\n              // var home = document.getElementById(\"homeDiv\");\n              // home.append(canvas)\n              let dataURL1 = canvas.toDataURL(\"image/jpeg\")\n\n              that.downloadImg(dataURL1,that.imgNum+that.beginIndex + 1, that.imgLength)\n            }\n          }\n        }\n      }\n    },\n    // base64转blob格式\n    convertBase64UrlToBlob(base64) {\n      var parts = base64.split(\";base64,\");\n      var contentType = parts[0].split(\":\")[1];\n      var raw = window.atob(parts[1]);\n      var rawLength = raw.length;\n      var uInt8Array = new Uint8Array(rawLength);\n      for (var i = 0; i < rawLength; i++) {\n        uInt8Array[i] = raw.charCodeAt(i);\n      }\n      return new Blob([uInt8Array], { type: contentType });\n    },\n    // 判断浏览器类型\n\n    myBrowser() {\n      var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串\n      if (userAgent.indexOf(\"OPR\") > -1) {\n        return \"Opera\";\n      } //判断是否Opera浏览器 OPR/43.0.2442.991\n      if (userAgent.indexOf(\"Firefox\") > -1) {\n        return \"FF\";\n      } //判断是否Firefox浏览器  Firefox/51.0\n      if (userAgent.indexOf(\"Trident\") > -1) {\n        return \"IE\";\n      } //判断是否IE浏览器  Trident/7.0; rv:11.0\n      if (userAgent.indexOf(\"Edge\") > -1) {\n        return \"Edge\";\n      } //判断是否Edge浏览器  Edge/14.14393\n      if (userAgent.indexOf(\"Chrome\") > -1) {\n        return \"Chrome\";\n      } // Chrome/56.0.2924.87\n      if (userAgent.indexOf(\"Safari\") > -1) {\n        return \"Safari\";\n      } //判断是否Safari浏览器 AppleWebKit/534.57.2 Version/5.1.7 Safari/534.57.2\n    },\n    //图片格式和PDF\n    downloadImg(base64,name,length) {\n      console.log('查看下载地址', base64)\n      console.log('查看传递名称', name)\n      console.log('查看传递长度', length)\n      let imageName = name;\n      name = name + '';\n      let imagelength = length - name.length;\n      if (imagelength > 0) {\n        for (let o = 0; o < imagelength; o++) {\n          imageName = '0' + imageName;\n        }\n      }\n      console.log(\"查看处理后的名称\",imageName)\n      // 图片转为base64\n      var blob = this.convertBase64UrlToBlob(base64); // 转为blob对象\n      // 下载\n      if (this.myBrowser() == \"IE\") {\n        console.log(\"IE\")\n        window.navigator.msSaveBlob(blob, imageName + \".jpg\");\n      } else if (this.myBrowser() == \"FF\") {\n        console.log(\"FF\")\n        window.location.href = base64;\n      } else {\n        console.log(\"a标签\")\n        var a = document.createElement(\"a\");\n        a.download = imageName;\n        a.href = URL.createObjectURL(blob);\n        a.click();\n      }\n      this.imgNum+=1;\n    },\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.homeDiv {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  .uploadDiv {\n\n    border-radius: 0.5rem;\n    box-shadow: 0 0 10px -5px rgb(10, 22, 185);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n    box-sizing: border-box;\n    padding: 0.5rem;\n    .topInput{\n      padding-bottom: 1rem;\n      input{\n        width: 9rem;\n        height: 2rem;\n        border-radius: 0.5rem;\n        border: 1px solid red;\n        box-sizing: border-box;\n        padding-left: 0.3rem;\n        outline: none;\n      }\n    }\n    .upload{\n      width: 10rem;\n      height: 4rem;\n      border: 1px solid red;\n      position: relative;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    p {\n      font-size: 0.6rem;\n    }\n    .file {\n      opacity: 0;\n      position: absolute;\n      inset: 0;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/rotate.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"homeDiv\",attrs:{\"id\":\"homeDiv\"}},[_c('div',{staticClass:\"uploadDiv\"},[_c('div',{staticClass:\"topInput\"},[_vm._v(\"初始下标: \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.beginIndex),expression:\"beginIndex\",modifiers:{\"number\":true}}],attrs:{\"type\":\"text\",\"disabled\":_vm.isControl,\"oninput\":\"value=value.replace(/[^\\\\d]/g,'')\",\"placeholder\":\"需要小一位\"},domProps:{\"value\":(_vm.beginIndex)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.beginIndex=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_vm._v(\" \"),_c('div',{staticClass:\"upload\"},[_c('p',[_vm._v(\"修改的文件\")]),_vm._v(\" \"),_c('input',{ref:\"file\",staticClass:\"file\",attrs:{\"type\":\"file\",\"multiple\":\"multiple\"},on:{\"change\":_vm.getFileData}})])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-681f7acb\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/rotate.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-681f7acb\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./rotate.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./rotate.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./rotate.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-681f7acb\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./rotate.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-681f7acb\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/rotate.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}